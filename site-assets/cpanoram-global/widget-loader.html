<!-- GHL custom-value script providing a custom value list -->
<script id="GHL_MY_WIDGET" type="text/plain">
  {{ custom_values.my_widget_data }}
</script>

<script>
  window.CP_MY_WIDGET_ID = 'GHL_MY_WIDGET';
  (function () {
    const id = window.CP_MY_WIDGET_ID || 'GHL_MY_WIDGET';
    const anchor = document.getElementById(id);
    if (!anchor) return;

    const raw = (anchor.textContent || '').trim(); // use if needed

    const version = window.CP_ASSETS_VERSION || 'main';
    const url = `https://cdn.jsdelivr.net/gh/Carolina-Panorama/GHL_Assets@${version}/site-assets/site-home-widgets/my-widget.html`;

    fetch(url)
      .then(r => r.text())
      .then(html => {
        const container = document.createElement('div');
        anchor.parentNode.insertBefore(container, anchor.nextSibling);
        container.innerHTML = html;

        container.querySelectorAll('script').forEach(oldScript => {
          const s = document.createElement('script');
          if (oldScript.src) s.src = oldScript.src;
          else s.textContent = oldScript.textContent;
          oldScript.parentNode.replaceChild(s, oldScript);
        });
      })
      .catch(err => console.error('Error loading my widget:', err));
  })();
</script>


<!-- Widgets that don't require custom value -->
 <script>
  (function () {
    const anchorId = 'CP_ARTICLE_LIST_FEED_WIDGET';
    const anchor = document.getElementById(anchorId) || document.currentScript;
    if (!anchor) return;

    const version = window.CP_ASSETS_VERSION || 'main';
    const url = `https://cdn.jsdelivr.net/gh/Carolina-Panorama/GHL_Assets@${version}/site-assets/site-home-widgets/article-list-feed.html`;

    fetch(url)
      .then(r => r.text())
      .then(html => {
        const container = document.createElement('div');
        anchor.parentNode.insertBefore(container, anchor.nextSibling);
        container.innerHTML = html;

        container.querySelectorAll('script').forEach(oldScript => {
          const s = document.createElement('script');
          if (oldScript.src) s.src = oldScript.src;
          else s.textContent = oldScript.textContent;
          oldScript.parentNode.replaceChild(s, oldScript);
        });
      })
      .catch(err => console.error('Error loading trending widget:', err));
  })();
</script>